///
/// @package @maddimathon/design-system-utilities@0.1.0-alpha.draft
/// @since 0.1.0-alpha.draft
///

// @use 'pkg:@maddimathon/utility-sass/colour';
// @use 'pkg:@maddimathon/utility-sass/list';
// @use 'pkg:@maddimathon/utility-sass/map';
// @use 'pkg:@maddimathon/utility-sass/math';
// @use 'pkg:@maddimathon/utility-sass/meta';
@use 'pkg:@maddimathon/utility-sass/selector';
// @use 'pkg:@maddimathon/utility-sass/string';

@use '../lib';

/* # COLOUR SHADE SWATCH ==================================== */

$_default_resultGroup_colCount: 6;

.shade-swatch {
    display: flex;
    flex-direction: column;

    padding: #{lib.var-mrg-soft('200')} #{lib.var-mrg-firm('300')};
    gap: #{lib.var-mrg-soft('300')} #{lib.var-mrg-firm('200')};

    background: var(--shade-swatch-background);
    color: var(--shade-swatch-color-override, var(--shade-swatch-color));

    > :global(:where(*)) {
        margin: 0;
    }

    > :global(*) {
        display: var(--shade-swatch-display-override, block);
        color: inherit;
    }

    :global(.shade-swatch__colour-value) {
        margin: 0;
        line-height: #{lib.var-line-height('100')};
        font-size: inherit;

        strong {
            font-weight: 500;
        }
    }

    :global(.shade-swatch__name) {
        $_allHeadingSels: (selector.unify(&, '%title'));

        @at-root #{$_allHeadingSels} {
            font-size: #{lib.var-fs(title)};
        }

        @each $num in lib.token-all-heading-levels() {
            $__tmp: selector.unify(&, '%h#{$num}');

            $_allHeadingSels: ($_allHeadingSels, $__tmp);

            @at-root #{$__tmp} {
                font-size: #{lib.var-fs(heading-#{$num})};
            }
        }

        @at-root #{$_allHeadingSels} {
            font-style: normal;
            letter-spacing: normal;
            text-transform: none;

            em {
                font-style: italic;

                em {
                    font-style: normal;

                    em {
                        font-style: italic;
                    }
                }
            }

            :global(.shade-swatch-table__wrapper) & {
                font-weight: 700;
                font-size: #{lib.var-fs(heading-9)};
            }
        }
    }

    /// ## CONTRAST ==================================== ///

    :global(.shade-swatch__contrast) {
        display: flex;
        flex-direction: column;
        gap: #{lib.var-mrg-half('200')} #{lib.var-mrg-firm('200')};
        font-size: #{lib.var-fs(smaller-1)};
    }

    :global(.shade-swatch__contrast[data-brightness-mode]) {
        background: transparent;
    }

    /// ### Result Groups ------------------ ///

    :global(.shade-swatch__contrast__result-group),
    :global(.shade-swatch__contrast__result-group__single-min-max) {
        grid-auto-flow: row;

        justify-content: space-between;
        justify-items: center;
        align-content: start;
        align-items: start;

        gap: #{lib.var-mrg-soft('200')} #{lib.var-mrg-firm('300')};
    }

    :global(.shade-swatch__contrast__result-group) {
        display: grid;
        grid-template-columns: repeat(
            var(
                --shade-swatch-contrast-result-group-column-count,
                #{$_default_resultGroup_colCount}
            ),
            min-content
        );
        grid-template-rows: auto auto;

        > :global(.shade-swatch__contrast__heading) {
            grid-column: span
                var(
                    --shade-swatch-contrast-result-group-column-count,
                    #{$_default_resultGroup_colCount}
                );
        }
    }

    :global(.shade-swatch__contrast__heading),
    :global(.shade-swatch__contrast__result-group__heading) {
        line-height: #{lib.var-line-height('100')};
        text-align: center;

        @include lib.colour-mode((low, average)) {
            color: var(
                --shade-swatch-color-override,
                var(--shade-swatch-contrast-result-group-heading-color)
            );
        }
    }
    &[data-shade-swatch-has-background='true'] {
        :global(
            .shade-swatch__contrast__heading[data-contrast-result-group-has-heading-color='true']
        ),
        :global(
            .shade-swatch__contrast__result-group__heading[data-contrast-result-group-has-heading-color='true']
        ) {
            @include lib.colour-mode((low, average)) {
                margin-block: #{lib.var-mrg-firm('300')}
                    #{lib.var-mrg-half('300')};
                padding: #{lib.var-stroke-relative('400')};

                font-weight: 500;
                // font-size: #{lib.var-fs(heading-9)};
                background: var(
                    --shade-swatch-contrast-result-group-heading-color,
                    #{lib.var-theme(text)}
                );

                color: var(
                    --shade-swatch-color-override,
                    var(--shade-swatch-background, #{lib.var-theme(background)})
                );
            }
        }
    }

    :global(.shade-swatch__contrast__heading) {
        margin-block-start: #{lib.var-mrg-firm('300')};
        // font-size: #{lib.var-fs(heading-8)};

        + :global(.shade-swatch__contrast__result-group) {
        }
    }

    :global(.shade-swatch__contrast__result-group--min-max) {
        justify-content: space-around;
    }

    :global(.shade-swatch__contrast__result-group--all-shades) {
        grid-template-rows: auto repeat(
                var(--shade-swatch-contrast-result-group-row-count, 2),
                auto
            );
    }

    :global(.shade-swatch__contrast__result-group__heading) {
        grid-column: span
            var(
                --shade-swatch-contrast-result-group-column-count,
                #{$_default_resultGroup_colCount}
            );
        margin: 0;
        // font-size: #{lib.var-fs(heading-9)};
    }

    :global(.shade-swatch__contrast__result-group__heading--maximum) {
        // color: transparent !important;
        text-transform: lowercase;
    }

    :global(.shade-swatch__contrast__result-group__heading--all-shades) {
        // text-align: start;
        text-transform: lowercase;
    }

    :global(.shade-swatch__contrast__result-group__single-min-max) {
        grid-column: span
            var(
                --shade-swatch-contrast-result-group-single-min-max-column-count,
                1
            );

        display: grid;
        grid-template-columns: repeat(
            var(
                --shade-swatch-contrast-result-group-single-min-max-column-count
            ),
            max-content
        );

        grid-template-rows: auto auto;
        justify-content: center;

        :global(.shade-swatch__contrast__result-group__heading) {
            grid-column: span
                var(
                    --shade-swatch-contrast-result-group-single-min-max-column-count,
                    1
                );
        }

        :global(.contrast-alert) {
        }
    }
}

@include lib.extend-selectors;
