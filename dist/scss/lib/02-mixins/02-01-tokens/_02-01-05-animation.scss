///
/// @package @maddimathon/design-system-utilities@0.1.0-alpha.11
/// @since 0.1.0-alpha
///

@use 'pkg:@maddimathon/utility-sass/feature-check';
@use 'pkg:@maddimathon/utility-sass/map';
@use 'pkg:@maddimathon/utility-sass/selector';

@use '../../../config';
@use '../../../tokens';

@use '../../01-functions' as *;

@use 'pkg:@maddimathon/utility-astro/02-mixins' as utils;

///
/// Outputs the included @keyframes definitions.
///
/// @since 0.1.0-alpha.8
///
@mixin animation-keyframes {
    /* #region Animations - Keyframes */
    @keyframes fade-in {
        0% {
            opacity: var(--#{config.$cxPropPre}fade--opacity-out, 0);
        }

        100% {
            opacity: var(--#{config.$cxPropPre}fade--opacity-in, 1);
        }
    }

    @keyframes fade-out {
        0% {
            opacity: var(--#{config.$cxPropPre}fade--opacity-in, 1);
        }

        100% {
            opacity: var(--#{config.$cxPropPre}fade--opacity-out, 0);
        }
    }
    /* #endregion Animations - Keyframes */
}

///
/// Prints out the transition custom property based on tokens.
///
/// @since 0.1.0-alpha
///
@mixin tokens-transition($trTime: true) {
    /* #region Tokens - Transitions */
    #{selector.parent-or-root()} {
        @if $trTime {
            @each $slug, $_value in map.get(tokens.$transition, time) {
                @if $slug == toggle-closing {
                } @else {
                    @include utils.cx-prop(
                        tr-time-#{$slug},
                        transition-time-value($slug)
                    );
                }
            }
        }
        @include utils.cx-prop(transition, none);
    }

    @include feature-check.js {
        @include utils.motion($nestParent: false, $unifyParent: true) {
            @if $trTime {
                @include utils.cx-prop(
                    tr-time-toggle-closing,
                    transition-time-value(toggle-closing)
                );
            }
            @include utils.cx-prop(
                transition,
                transition-properties-value(true)
            );
        }
        @include utils.no-motion($nestParent: false, $unifyParent: true) {
            @if $trTime {
                @include utils.cx-prop(tr-time-toggle-closing, 0 !important);
            }
            @include utils.cx-prop(
                transition,
                #{transition-properties-value(false)} !important
            );
        }
    }
    /* #endregion Tokens - Transitions */
}
