///
/// @package @maddimathon/design-system-utilities@0.1.0-alpha.draft
/// @since 0.1.0-alpha.draft
///

@use 'pkg:@maddimathon/utility-sass/list';
@use 'pkg:@maddimathon/utility-sass/map';
@use 'pkg:@maddimathon/utility-sass/math';
@use 'pkg:@maddimathon/utility-sass/meta';

@use 'pkg:@maddimathon/utility-astro/03-snippets' as lib;

@use '../../config';
@use '../../tokens';

@use '../01-functions' as *;
// @use '../02-mixins' as *;

@mixin extend-selectors-globals(
    $additional: (),
    $optional: null,
    $allHeadingLevels: token-all-heading-levels()
) {
    //
    $additional: list.append(
        $additional,
        (("button[type='reset']", "input[type='reset']") button-form-reset)
    );
    $additional: list.append(
        $additional,
        (("button[type='submit']", "input[type='submit']"), button-form-submit)
    );

    @if config.$print_docs {
        $additional: list.join(
            $additional,
            (
                ('.theme-mode-swatch__sample--selection', 'selection'),
                (
                    '.website-settings-menu [data-settings-reset]',
                    button-form-reset
                )
            ),
            $separator: comma
        );

        @if list.length(map.keys(tokens.$themes)) > 1 {
            @each $key, $theme in tokens.$themes {
                @if $key != default {
                    $additional: list.append(
                        $additional,
                        ('.active-theme--#{$key}', 'active-theme--#{$key}'),
                        $separator: comma
                    );
                }
            }
        }
    }

    @include lib.extend-selectors-globals(
        $additional: $additional,
        $optional: $optional
    );
}

@mixin extend-selectors-utils(
    $additional: (),
    $optional: null,
    $allHeadingLevels: token-all-heading-levels()
) {
    //
    $additional: list.append($additional, ('.alert-block', 'alert'));
    $additional: list.append($additional, ('p.aside', 'aside'));
    $additional: list.append($additional, ('.button-span', 'button-span'));
    $additional: list.append($additional, ('.icon', 'icon'));

    @include lib.extend-selectors-utils(
        $additional: $additional,
        $optional: $optional
    );
}

@mixin extend-selectors(
    $optional: null,
    $additional_globals: (),
    $additional_utils: (),
    $allHeadingLevels: token-all-heading-levels()
) {
    @if config.$print_globals {
        @include extend-selectors-globals(
            $additional: $additional_globals,
            $optional: $optional,
            $allHeadingLevels: $allHeadingLevels
        );
    }

    @if config.$print_utils {
        @include extend-selectors-utils(
            $additional: $additional_utils,
            $optional: $optional,
            $allHeadingLevels: $allHeadingLevels
        );
    }
}
