///
/// @package @maddimathon/design-system-utilities@0.1.0-alpha.draft
/// @since 0.1.0-alpha.draft
///

// @use 'pkg:@maddimathon/utility-sass/colour';
// @use 'pkg:@maddimathon/utility-sass/list';
// @use 'pkg:@maddimathon/utility-sass/map';
// @use 'pkg:@maddimathon/utility-sass/math';
@use 'pkg:@maddimathon/utility-sass/meta';
// @use 'pkg:@maddimathon/utility-sass/selector';
// @use 'pkg:@maddimathon/utility-sass/string';

@use '../01-functions' as *;
@use '../02-mixins' as *;

@use 'utils';

///
/// Colour properties for an input element.
///
/// @since 0.1.0-alpha.draft
///
@mixin snippet-button-colours($variation: 'primary') {
    --focus-ring-outline-color: #{var-theme(button-#{$variation}-border)};
    background-color: #{var-theme(button-#{$variation}-bg)};
    border-color: #{var-theme(button-#{$variation}-border)};
    color: #{var-theme(button-#{$variation}-text)};
    accent-color: #{var-theme(button-#{$variation}-border)};

    @include hover-focus-visible-or-within {
        --focus-ring-outline-color: #{var-theme(
                button-#{$variation}-border-hover
            )};
        background-color: #{var-theme(button-#{$variation}-bg-hover)};
        border-color: #{var-theme(button-#{$variation}-border-hover)};
        color: #{var-theme(button-#{$variation}-text-hover)};
        accent-color: #{var-theme(button-#{$variation}-border-hover)};
    }

    &:active {
        --focus-ring-outline-color: #{var-theme(
                button-#{$variation}-border-active
            )};
        background-color: #{var-theme(button-#{$variation}-bg-active)};
        border-color: #{var-theme(button-#{$variation}-border-active)};
        color: #{var-theme(button-#{$variation}-text-active)};
        accent-color: #{var-theme(button-#{$variation}-border-active)};
    }
}

///
/// Base styles for a button element.
///
/// @since 0.1.0-alpha.draft
///
@mixin snippet-button($includeUtils: true, $args...) {
    $args: meta.keywords($args);

    $focusOffset: var-border-width('300');

    @if $includeUtils {
        @include utils.snippet-button(
            $focusOffset: $focusOffset,
            $opacity_hover: 1,
            $includeClrs: false,
            $args...
        );
    } @else {
        --focus-ring-outline-offset: #{$focusOffset};

        @include colour-mode-interactive-mixin(
            $modes: (
                low,
                average,
            ),
            $hover: true,
            $focus: true,
            $focusWithin: true,
            $includeDefault: false
        ) {
            opacity: 1;
        }
    }

    & {
        @include snippet-button-colours;
    }
}

///
/// Base styles for an input element.
///
/// @since 0.1.0-alpha.draft
///
@mixin snippet-input($includeUtils: true, $args...) {
    $args: meta.keywords($args);

    $borderWidth: '200';

    $accentClr: var-theme(field-accent);
    $accentClr_active: var-theme(field-accent-active);
    $accentClr_hover: var-theme(field-accent-hover);

    $background: var-theme(field-bg);
    $background_active: var-theme(field-bg-active);
    $background_hover: var-theme(field-bg-hover);

    $borderClr: var-theme(field-border);
    $borderClr_active: var-theme(field-border-active);
    $borderClr_hover: var-theme(field-border-hover);

    $color: var-theme(field-text);
    $color_active: var-theme(field-text-active);
    $color_hover: var-theme(field-text-hover);

    $focusOffset: var-border-width('300');

    @if $includeUtils {
        @include utils.snippet-input(
            $accentClr: $accentClr,
            $accentClr_active: $accentClr_active,
            $accentClr_hover: $accentClr_hover,

            $background: $background,
            $background_active: $background_active,
            $background_hover: $background_hover,

            $borderClr: $borderClr,
            $borderClr_active: $borderClr_active,
            $borderClr_hover: $borderClr_hover,

            $color: $color,
            $color_active: $color_active,
            $color_hover: $color_hover,

            $focusOffset: $focusOffset,
            $opacity_hover: 1,

            $includeClrs: true,
            $includePlaceholder: false,
            $args...
        );
    } @else {
        --focus-ring-outline-color: #{$accentClr};
        --focus-ring-outline-offset: #{$focusOffset};
        background-color: #{$background};
        color: #{$color};
        accent-color: #{$accentClr};

        @include hover-focus-visible-or-within {
            --focus-ring-outline-color: #{$accentClr_hover};
            background-color: #{$background_hover};
            border-color: #{$borderClr_hover};
            color: #{$color_hover};
            accent-color: #{$accentClr_hover};
        }

        &:active {
            --focus-ring-outline-color: #{$accentClr_active};
            background-color: #{$background_active};
            border-color: #{$borderClr_active};
            color: #{$color_active};
            accent-color: #{$accentClr_active};
        }
    }

    & {
        border-width: #{var-border-width($borderWidth)};
    }
}

///
/// Base styles for the types of an element. Uses the & as input.
///
/// @since 0.1.0-alpha.draft
///
@mixin snippet-input-types(
    $includeUtils: true,
    //
    $accentClr: var-theme(field-border),
    $accentClr_active: var-theme(field-border-active),
    $accentClr_hover: var-theme(field-border-hover),
    $includeBase: true,
    $args...
) {
    $args: meta.keywords($args);

    @include utils.snippet-input-types(
        $accentClr: $accentClr,
        $accentClr_active: $accentClr_active,
        $accentClr_hover: $accentClr_hover,
        $includeBase: $includeBase,

        $includeClrs: true,
        $args...
    );
}

///
/// Base styles for a form label, including check and radio boxes.
///
/// @since 0.1.0-alpha.draft
///
@mixin snippet-label(
    $color: var-theme(text-primary),
    $color_checkradio: var-theme(text),
    //
    // $gap: var-mrg-soft('300'),
    // $lh_checkradio: var-line-height('400'),
    // $lh: var-line-height('200'),
    // $marginBlock_innercheckradio: var-mrg-firm('200'),
    // $marginBlock: var-mrg-firm('400')
    $args...
) {
    $args: meta.keywords($args);

    @if $includeUtils {
        @include utils.snippet-label(
            $color: $color,
            $color_checkradio: $color_checkradio,
            $includeClrs: true,
            $args...
        );
    }
}
