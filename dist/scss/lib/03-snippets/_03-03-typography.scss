///
/// @package @maddimathon/design-system-utilities@0.1.0-alpha.draft
/// @since 0.1.0-alpha.draft
///

@use 'pkg:@maddimathon/utility-sass/math';
@use 'pkg:@maddimathon/utility-sass/meta';

@use '../../tokens';

@use '../01-functions' as *;
@use '../02-mixins' as *;

@use 'pkg:@maddimathon/utility-astro/03-snippets' as utils;

///
/// Adds basic rules for the given heading using tokens in the system.
///
/// @since 0.1.0-alpha.draft
///
@mixin snippet-heading($slug: '7', $includeUtils: true) {
    //
    $slugAsNumber: if(meta.type-of($slug) == 'number', $slug, null);
    $slug: #{$slug};

    $heading10orAbove: false;

    $color: var-theme(heading-10);

    @if $slug == title {
        $color: var-theme(heading-1);
    } @else if $slug {
        //
        $color: var-theme(heading-#{$slug});

        $slugAsNumber: if(
            $slugAsNumber == null,
            math.num-val($slug),
            $slugAsNumber
        );

        @if $slugAsNumber >= 10 {
            $heading10orAbove: true;
        }
    }

    @if $includeUtils {
        @include utils.snippet-heading($slug: $slug);
        // } @else {
    }

    @if $slug == title or $slug == '1' {
    }

    @if $slug == '2' {
    }

    @if $slug == '3' {
    }

    @if $slug == '4' {
    }

    @if $slug == '5' {
    }

    @if $slug == '6' {
    }

    @if $slug == '7' or $slug == '8' or $slug == '9' or $heading10orAbove {
    }

    @if $slug == '8' {
    }

    @if $slug == '9' {
    }

    @if $slug == '10' or $heading10orAbove {
    }

    @if $heading10orAbove {
    }

    @if font-family-exists(heading) {
        font-family: #{var-font-family(heading)};
    }
    color: #{$color};

    %a {
        color: #{var-theme(link)};

        @include hover-focus-visible() {
            color: #{var-theme(link-hover)};
        }

        &:active {
            color: #{var-theme(link-active)};
        }
    }
}

///
///
///
/// @since 0.1.0-alpha.draft
///
@mixin snippet-selection($contrast: tokens.$contrastMode_default) {
    //
    --icon-color: #{var-theme(selection-text, $contrast: $contrast)} !important;
    color: #{var-theme(selection-text, $contrast: $contrast)} !important;

    background-color: #{var-theme(selection-bg, $contrast: $contrast)} !important;

    @if $contrast == average {
        //
        background-color: color-mix(
            in srgb,
            #{var-theme(selection-bg, $contrast: $contrast)}
                var(--selection-background-opacity, 75%),
            transparent
        ) !important;
        //
    } @else if $contrast == low {
        //
        background-color: color-mix(
            in srgb,
            #{var-theme(selection-bg, $contrast: $contrast)}
                var(--selection-background-opacity, 65%),
            transparent
        ) !important;
        //
    } @else if $contrast == high {
        //
        background-color: color-mix(
            in srgb,
            #{var-theme(selection-bg, $contrast: $contrast)}
                var(--selection-background-opacity, 90%),
            transparent
        ) !important;
    }
}
