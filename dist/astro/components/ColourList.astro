---
/**
 * @since 0.1.0-alpha.draft
 *
 * @packageDocumentation
 */

/* import - types */
import type { TokenLevels_Extended } from '../../ts/02-new-tokens/@types.d.ts';
import type { Tokens_Internal } from '../../ts/02-new-tokens/Tokens.js';
import type { Tokens_Colour_ShadeMap } from '../../ts/02-new-tokens/Colour/Colour_ShadeMap.js';

/* import - functions */
import { shadeMapToArray } from '../functions/shadeMapToArray.js';

/* import - values */

/* import - components */
import ColourShadeSwatch from './ColourShadeSwatch.astro';

/* import - layouts */

/* TYPES ===================================== */

/* PROPS ===================================== */

export interface Props<
    T_ColourName extends string = Tokens_Internal.Default_ColourName,
    T_ExtraLevels extends
        TokenLevels_Extended = Tokens_Internal.Default_ExtraColourLevels,
> {
    name: string;

    colour: Tokens_Colour_ShadeMap.JsonReturn<T_ColourName, T_ExtraLevels>;

    bases?: Tokens_Colour_ShadeMap.JsonReturn<T_ColourName, T_ExtraLevels>;

    /** Unique. */
    id?: string;

    shadeHeading?: '2' | '3' | '4' | '5' | '6';

    frontmatter?: Omit<Props<T_ColourName, T_ExtraLevels>, 'frontmatter'>;
}

const { bases, id, name, shadeHeading, ...props }: Props =
    Astro.props.frontmatter ?? Astro.props;

/* FUNCTIONS ===================================== */

/* CONSTANTS ===================================== */

const colour = shadeMapToArray(props.colour);
---

{
    colour && (
        <div
            id={id}
            class='colour-swatch-list'
        >
            {colour.map(({ level, values }) => (
                <ColourShadeSwatch
                    bases={bases}
                    heading={shadeHeading}
                    level={level}
                    name={name}
                    values={values}
                />
            ))}
        </div>
    )
}

<style lang='scss' is:global>
    @forward '../css/colour-list';
</style>
