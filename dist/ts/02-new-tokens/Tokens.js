/**
 * @since 0.1.0-alpha.draft
 *
 * @packageDocumentation
 */
/*!
 * @maddimathon/design-system-utilities@0.1.0-alpha.draft
 * @license MIT
 */
import { JsonToScss } from '@maddimathon/utility-sass';
import { AbstractTokens } from './abstract/AbstractTokens.js';
import { Tokens_Colour } from './Tokens_Colour.js';
import { Tokens_CSS } from './Tokens_CSS.js';
import { Tokens_Spacing } from './Tokens_Spacing.js';
import { Tokens_Themes } from './Tokens_Themes.js';
import { Tokens_Typography } from './Tokens_Typography.js';
/**
 * Generates a complete token object for the design system.
 *
 * @since 0.1.0-alpha.draft
 */
export class Tokens extends AbstractTokens {
    clrNames;
    extraColourLevels;
    input;
    config;
    get data() {
        return {
            spacing: this.spacing.data,
            typography: this.typography.data,
            css: this.css.data,
            colour: this.colour.data,
            themes: this.themes.data,
        };
    }
    colour;
    css;
    spacing;
    themes;
    typography;
    /**
     * Used instead of the constructor so that it can be async.
     */
    static async build(input, config = {}) {
        const allClrNames = [
            'base',
            ...Object.keys(input.colour ?? {}),
        ];
        const extraColourLevels = config.extraColourLevels ?? [];
        const brightnessModes = input.themes?.brightness?.length
            ? input.themes.brightness
            : ['light', 'dark'];
        const contrastModes = [
            "average",
            "high",
            ...(input.themes?.contrast?.filter(c => c !== 'average' && c !== 'high')
                ?? ['low']),
        ];
        const themes = await Tokens_Themes.build(allClrNames, extraColourLevels, brightnessModes, [...contrastModes], input.themes?.input ?? []);
        const tokens = new Tokens(allClrNames, extraColourLevels, themes, input, {
            ...config,
            extraColourLevels: undefined,
        });
        await tokens.colour.addContrastTests();
        return tokens;
    }
    constructor(clrNames, extraColourLevels, themes, input, config = {}) {
        super();
        this.clrNames = clrNames;
        this.extraColourLevels = extraColourLevels;
        this.input = input;
        this.config = config;
        this.colour = new Tokens_Colour(this.clrNames, this.extraColourLevels, this.input.colour ?? {});
        this.css = new Tokens_CSS(this.input.css ?? {});
        this.spacing = new Tokens_Spacing(this.input.spacing ?? {});
        this.themes = themes;
        this.typography = new Tokens_Typography(this.input.typography ?? {});
    }
    toJSON() {
        return {
            spacing: this.spacing.toJSON(),
            typography: this.typography.toJSON(),
            colour: this.colour.toJSON(),
            themes: this.themes.toJSON(),
            css: this.css.toJSON(),
        };
    }
    toScssVars() {
        return {
            ...this.spacing.toScssVars(),
            ...this.typography.toScssVars(),
            ...this.css.toScssVars(),
            colour: this.colour.toScssVars(),
            themes: this.themes.toScssVars(),
        };
    }
    toScss() {
        const _vars = this.toScssVars();
        const vars = {
            spacing_multiplier: JsonToScss.convert(_vars.spacing_multiplier) || Tokens_Spacing.default.multiplier.toString(),
            margin: JsonToScss.convert(_vars.margin) || '()',
            font: JsonToScss.convert(_vars.font) || '()',
            line_height: JsonToScss.convert(_vars.line_height) || '()',
            border: JsonToScss.convert(_vars.border) || '()',
            transition: JsonToScss.convert(_vars.transition) || '()',
            z_index: JsonToScss.convert(_vars.z_index) || '()',
            colour: JsonToScss.convert(_vars.colour) || '()',
            themes: JsonToScss.convert(_vars.themes) || '()',
        };
        const scss = [
            '// this file is auto-generated by the design-system-utilities Tokens class',
        ];
        const defaultString = this.config.tokensAsDefault ? ' !default' : '';
        for (const t_key in vars) {
            const _key = t_key;
            scss.push(`$${_key}: ${vars[_key]}${defaultString};`);
        }
        return scss.join('\n\n');
    }
}
/**
 * Utilities for the {@link Tokens} class.
 *
 * @since 0.1.0-alpha.draft
 */
(function (Tokens) {
    ;
    Tokens.SampleColours = {
        red: {
            '100': { l: 96, c: 5, h: 15, },
            '500': { l: 50, c: 49, h: 15, },
            '900': { l: 2, c: 3, h: 15, },
        },
        orange: {
            '100': { l: 98, c: 8.5, h: 180 },
            '500': { l: 52, c: 40.5, h: 180 },
            '900': { l: 2, c: 100, h: 180 },
        },
        yellow: {
            '100': { l: 98, c: 8.5, h: 180 },
            '500': { l: 52, c: 40.5, h: 180 },
            '900': { l: 2, c: 100, h: 180 },
        },
        green: {
            '100': { l: 98, c: 8.5, h: 180 },
            '500': { l: 52, c: 40.5, h: 180 },
            '900': { l: 2, c: 100, h: 180 },
        },
        blue: {
            '100': { l: 98, c: 8.5, h: 180 },
            '500': { l: 52, c: 40.5, h: 180 },
            '900': { l: 2, c: 100, h: 180 },
        },
        turquoise: {
            '100': { l: 98, c: 8.5, h: 180 },
            '500': { l: 52, c: 40.5, h: 180 },
            '900': { l: 2, c: 100, h: 180 },
        },
        purple: {
            '100': { l: 96, c: 7, h: 318 },
            '500': { l: 47, c: 50, h: 318 },
            '900': { l: 2, c: 4, h: 318 },
        },
        pink: {
            '100': { l: 98, c: 8.5, h: 180 },
            '500': { l: 52, c: 40.5, h: 180 },
            '900': { l: 2, c: 100, h: 180 },
        },
    };
})(Tokens || (Tokens = {}));
//# sourceMappingURL=Tokens.js.map