/**
 * @since 0.1.0-alpha.draft
 *
 * @packageDocumentation
 */
/*!
 * @maddimathon/design-system-utilities@0.1.0-alpha.draft
 * @license MIT
 */
import { JsonToScss } from '@maddimathon/utility-sass';
import { AbstractTokens } from './abstract/AbstractTokens.js';
import { Tokens_Colour } from './Tokens_Colour.js';
import { Tokens_CSS } from './Tokens_CSS.js';
import { Tokens_Icons } from './Tokens_Icons.js';
import { Tokens_Spacing } from './Tokens_Spacing.js';
import { Tokens_Themes } from './Tokens_Themes.js';
import { Tokens_Typography } from './Tokens_Typography.js';
import { Tokens_Themes_Set_SingleMode } from './Themes/Themes_Set_SingleMode.js';
/**
 * Generates a complete token object for the design system.
 *
 * @since 0.1.0-alpha.draft
 */
export class Tokens extends AbstractTokens {
    clrNames;
    extraColourLevels;
    input;
    config;
    get data() {
        return {
            icons: this.icons.data,
            spacing: this.spacing.data,
            typography: this.typography.data,
            colour: this.colour.data,
            themes: this.themes.data,
            css: this.css.data,
        };
    }
    colour;
    css;
    icons;
    spacing;
    themes;
    typography;
    /**
     * Used instead of the constructor so that it can be async.
     */
    static async build(input, config = {}) {
        const allClrNames = [
            'base',
            ...Object.keys(input.colour ?? {}),
        ];
        const extraColourLevels = config.extraColourLevels ?? [];
        const brightnessModes = input.themes?.brightness?.length
            ? input.themes.brightness
            : ['light', 'dark'];
        const contrastModes = [
            'low',
            'average',
            'high',
            'max',
            ...(input.themes?.contrast?.filter(c => c !== 'low' && c !== 'average' && c !== 'high' && c !== 'max')
                ?? []),
        ];
        const themes = await Tokens_Themes.build(allClrNames, extraColourLevels, brightnessModes, [...contrastModes], input.themes?.input ?? []);
        const tokens = new Tokens(allClrNames, extraColourLevels, themes, input, {
            ...config,
            extraColourLevels: undefined,
        });
        await tokens.colour.addContrastTests();
        return tokens;
    }
    constructor(clrNames, extraColourLevels, themes, input, config = {}) {
        super();
        this.clrNames = clrNames;
        this.extraColourLevels = extraColourLevels;
        this.input = input;
        this.config = config;
        this.colour = new Tokens_Colour(this.clrNames, this.extraColourLevels, this.input.colour ?? {});
        this.css = new Tokens_CSS(this.input.css ?? {});
        this.icons = new Tokens_Icons(this.input.icons ?? {});
        this.spacing = new Tokens_Spacing(this.input.spacing ?? {});
        this.themes = themes;
        this.typography = new Tokens_Typography(this.spacing, this.input.typography ?? {});
    }
    toJSON() {
        return {
            icons: this.icons.toJSON(),
            spacing: this.spacing.toJSON(),
            typography: this.typography.toJSON(),
            colour: this.colour.toJSON(),
            themes: this.themes.toJSON(),
            css: this.css.toJSON(),
        };
    }
    toScssVars() {
        return {
            ...this.spacing.toScssVars(),
            ...this.typography.toScssVars(),
            ...this.css.toScssVars(),
            icons: this.icons.toScssVars(),
            colour: this.colour.toScssVars(),
            themes: this.themes.toScssVars(),
        };
    }
    toScss() {
        // const _vars = this.toScssVars();
        // const vars: { [ K in keyof typeof _vars ]: string; } = {
        //     spacing_multiplier: JsonToScss.convert( _vars.spacing_multiplier ) || Tokens_Spacing.default.multiplier.toString(),
        //     margin: JsonToScss.convert( _vars.margin ) || '()',
        //     font: JsonToScss.convert( _vars.font ) || '()',
        //     line_height: JsonToScss.convert( _vars.line_height ) || '()',
        //     border: JsonToScss.convert( _vars.border ) || '()',
        //     transition: JsonToScss.convert( _vars.transition ) || '()',
        //     z_index: JsonToScss.convert( _vars.z_index ) || '()',
        //     colour: JsonToScss.convert( _vars.colour ) || '()',
        //     themes: JsonToScss.convert( _vars.themes ) || '()',
        // };
        const tokensString = JsonToScss.convert(this.toScssVars()) || '()';
        const varString = [
            '$designSystem: ',
            tokensString,
            (this.config.tokensAsDefault ? ' !default' : ''),
            ';',
        ].join('');
        const scss = [
            '// this file is auto-generated by the design-system-utilities Tokens class',
            varString,
        ];
        // const defaultString = this.config.tokensAsDefault ? ' !default' : '';
        // for ( const t_key in vars ) {
        //     const _key = t_key as keyof typeof vars;
        //     scss.push( `$${ _key }: ${ vars[ _key ] }${ defaultString };` );
        // }
        return scss.join('\n\n');
    }
}
/**
 * Utilities for the {@link Tokens} class.
 *
 * @since 0.1.0-alpha.draft
 */
(function (Tokens) {
    /**
     * @since 0.1.0-alpha.draft
     */
    async function sample() {
        return Tokens.build({
            colour: {
                // 'hue-50': {
                //     500: { l: 50, c: 50, h: 50 },
                // },
                base: Tokens.SampleColours.base,
                purple: Tokens.SampleColours.purple,
                turquoise: Tokens.SampleColours.turquoise,
                red: Tokens.SampleColours.red,
                // orange: Tokens.SampleColours.orange,
                // yellow: Tokens.SampleColours.yellow,
                // green: Tokens.SampleColours.green,
                // turquoise: Tokens.SampleColours.turquoise,
                // blue: Tokens.SampleColours.blue,
                // purple: Tokens.SampleColours.purple,
                // pink: Tokens.SampleColours.pink,
            },
        }, { tokensAsDefault: true, });
    }
    Tokens.sample = sample;
    ;
    /**
     * @since 0.1.0-alpha.draft
     */
    Tokens.SampleColours = {
        yardstick: {
            '100': { l: 98, c: 0, h: 0, },
            '500': { l: 50, c: 0, h: 0, },
            '900': { l: 2, c: 0, h: 0, },
        },
        base: {
            // '100': 'F9F9F9',
            // '500': '777777',
            // '900': '070707',
            '100': { l: 98, c: 0, h: 0, },
            '500': { l: 50, c: 0, h: 0, },
            '900': { l: 2, c: 0, h: 0, },
        },
        red: {
            '100': { h: 5, s: 100, l: 98, },
            '300': { h: 4, s: 100, l: 79.5, },
            '500': { h: 3, s: 68, l: 53, },
            '900': { h: 7, s: 90, l: 4, },
        },
        orange: {
            '100': { h: 35, s: 100, l: 96.5, },
            '500': { h: 22, s: 75, l: 43, },
            '900': { h: 19, s: 100, l: 3, },
        },
        yellow: {
            '100': { h: 49, s: 100, l: 94, },
            '300': { h: 45, s: 70, l: 54, },
            '500': { h: 35, s: 100, l: 34, },
            '900': { h: 20, s: 100, l: 3, },
        },
        green: {
            '100': { h: 112, s: 53, l: 97, },
            '500': { h: 125, s: 50, l: 35.5, },
            '900': { h: 112, s: 81, l: 2, },
        },
        turquoise: {
            '100': { h: 157, s: 68, l: 96.5, },
            '300': { h: 160, s: 45, l: 60, },
            '500': { h: 168, s: 92, l: 27.5, },
            '700': { h: 162, s: 69, l: 16.5, },
            '900': { h: 153, s: 100, l: 2, },
        },
        blue: {
            '100': { h: 245, s: 100, l: 98.5, },
            '500': { h: 230, s: 63, l: 60, },
            '900': { h: 244, s: 41, l: 4, },
        },
        purple: {
            '100': { h: 270, s: 100, l: 98.5, },
            '500': { h: 280, s: 60, l: 56.5, },
            '900': { h: 285, s: 75, l: 4.5, },
        },
        pink: {
            '100': { h: 325, s: 100, l: 98, },
            '300': { h: 322, s: 100, l: 79.5, },
            '500': { h: 320, s: 58, l: 51, },
            '900': { h: 322, s: 85, l: 5, },
        },
    };
    /**
     * @since 0.1.0-alpha.draft
     */
    let Typography;
    (function (Typography) {
        let Font;
        (function (Font) {
            /**
             * @since 0.1.0-alpha.draft
             */
            Font.SystemUI = [
                'system-ui',
                '-apple-system',
                'BlinkMacSystemFont',
                'Segoe UI',
                'Roboto',
                'Oxygen-Sans',
                'Ubuntu',
                'Cantarell',
                'Helvetica Neue',
                'Helvetica',
                'Arial',
                'sans-serif',
                'Apple Color Emoji',
                'Segoe UI Emoji',
                'Segoe UI Symbol',
            ];
        })(Font = Typography.Font || (Typography.Font = {}));
    })(Typography = Tokens.Typography || (Tokens.Typography = {}));
    /**
     * @since 0.1.0-alpha.draft
     */
    let Themes;
    (function (Themes) {
        /**
         * @since 0.1.0-alpha.draft
         */
        Themes.allHeadingLevels = Tokens_Themes_Set_SingleMode.allHeadingLevels;
    })(Themes = Tokens.Themes || (Tokens.Themes = {}));
})(Tokens || (Tokens = {}));
//# sourceMappingURL=Tokens.js.map