/**
 * @since 0.1.0-alpha.draft
 *
 * @packageDocumentation
 */
/*!
 * @maddimathon/design-system-utilities@0.1.0-alpha.draft
 * @license MIT
 */
import { JsonToScss } from '@maddimathon/utility-sass';
import * as z from 'zod';
import { AbstractTokens } from './abstracts/AbstractTokens.js';
import { Tokens_Colour } from './Tokens/Colour.js';
import { Tokens_Spacing } from './Tokens/Spacing.js';
import { Tokens_Typography } from './Tokens/Typography.js';
import { Tokens_CSS_Border } from './Tokens/CSS/CSS_Border.js';
import { Tokens_CSS_Transition } from './Tokens/CSS/CSS_Transition.js';
import { Tokens_Theme } from './Tokens/Theme.js';
/**
 * Generates a complete token object for the design system.
 *
 * @since 0.1.0-alpha.draft
 */
export class Tokens extends AbstractTokens {
    get schema() {
        return Tokens.Schema;
    }
    colour;
    spacing;
    theme;
    typography;
    CSS;
    opts;
    constructor(input, opts) {
        super(input ?? {});
        this.opts = {
            tokensAsDefault: false,
            ...opts,
        };
        this.colour = new Tokens_Colour(input?.colour ?? {});
        this.spacing = new Tokens_Spacing(input?.spacing ?? {});
        this.theme = new Tokens_Theme(input?.theme ?? {});
        this.typography = new Tokens_Typography(this.spacing, input?.typography ?? {});
        const zIndex = this.schema.shape.CSS.shape.zIndex.parse(input?.css?.zIndex ?? {});
        this.CSS = {
            border: new Tokens_CSS_Border(input?.css?.border ?? {}),
            transition: new Tokens_CSS_Transition(input?.css?.transition ?? {}),
            zIndex,
        };
    }
    toJSON() {
        return {
            spacing: this.spacing.toJSON(),
            typography: this.typography.toJSON(),
            colour: this.colour.toJSON(),
            theme: this.theme.toJSON(),
            CSS: {
                border: this.CSS.border.toJSON(),
                transition: this.CSS.transition.toJSON(),
                zIndex: this.CSS.zIndex,
            },
        };
    }
    toScssVars() {
        return {
            ...this.spacing.toScssVars(),
            ...this.typography.toScssVars(),
            border: this.CSS.border.toScssVars(),
            transition: this.CSS.transition.toScssVars(),
            z_index: this.CSS.zIndex,
            colour: this.colour.toScssVars(),
            theme: this.theme.toScssVars(),
        };
    }
    toScss() {
        const _vars = this.toScssVars();
        const vars = {
            spacing_multiplier: JsonToScss.convert(_vars.spacing_multiplier) || String(this.schema.shape.spacing.shape.multiplier.parse('')),
            margin: JsonToScss.convert(_vars.margin) || '()',
            font: JsonToScss.convert(_vars.font) || '()',
            line_height: JsonToScss.convert(_vars.line_height) || '()',
            border: JsonToScss.convert(_vars.border) || '()',
            transition: JsonToScss.convert(_vars.transition) || '()',
            z_index: JsonToScss.convert(_vars.z_index) || '()',
            colour: JsonToScss.convert(_vars.colour) || '()',
            theme: JsonToScss.convert(_vars.theme) || '()',
        };
        const scss = [
            '// this file is auto-generated by the design-system-utilities Tokens class',
        ];
        const defaultString = this.opts.tokensAsDefault ? ' !default' : '';
        for (const t_key in vars) {
            const _key = t_key;
            scss.push(`$${_key}: ${vars[_key]}${defaultString};`);
        }
        return scss.join('\n\n');
    }
    valueOf() {
        return {
            spacing: this.spacing.valueOf(),
            typography: this.typography.valueOf(),
            colour: this.colour.valueOf(),
            theme: this.theme.valueOf(),
            CSS: {
                border: this.CSS.border.valueOf(),
                transition: this.CSS.transition.valueOf(),
                zIndex: this.CSS.zIndex,
            },
        };
    }
}
/**
 * Utilities for the {@link Tokens} class.
 *
 * @since 0.1.0-alpha.draft
 */
(function (Tokens) {
    ;
    /* SCHEMA
     * ====================================================================== */
    Tokens.Schema = z.object({
        colour: Tokens_Colour.Schema,
        spacing: Tokens_Spacing.Schema,
        theme: Tokens_Theme.Schema,
        typography: Tokens_Typography.Schema,
        CSS: z.object({
            border: Tokens_CSS_Border.Schema,
            transition: Tokens_CSS_Transition.Schema,
            zIndex: z.object({
                nav: z.number().default(1000),
                settings: z.number().default(9999),
                skipLink: z.number().default(99999),
            }),
        }),
    });
    ;
})(Tokens || (Tokens = {}));
//# sourceMappingURL=Tokens.js.map