/**
 * @since 0.1.0-alpha.draft
 *
 * @packageDocumentation
 */
/*!
 * @maddimathon/design-system-utilities@0.1.0-alpha.draft
 * @license MIT
 */
import { JsonToScss } from '@maddimathon/utility-sass';
import * as z from 'zod';
import * as Schemata from '../00-schemata/index.js';
import { AbstractTokens } from './abstracts/AbstractTokens.js';
import { Tokens_Spacing } from './Tokens/Spacing.js';
import { Tokens_Typography } from './Tokens/Typography.js';
import { Tokens_CSS_Border } from './Tokens/CSS_Border.js';
import { Tokens_CSS_Transition } from './Tokens/CSS_Transition.js';
export { AbstractTokens, Tokens_Spacing, Tokens_Typography, Tokens_CSS_Border, Tokens_CSS_Transition, };
/**
 * Generates a complete token object for the design system.
 *
 * @since 0.1.0-alpha.draft
 */
export class Tokens extends AbstractTokens {
    get schema() {
        return Schemata.Tokens;
    }
    spacing;
    typography;
    CSS;
    opts;
    constructor(input, opts) {
        super(input ?? {});
        this.opts = {
            tokensAsDefault: false,
            ...opts,
        };
        this.spacing = new Tokens_Spacing(input?.spacing ?? {});
        this.typography = new Tokens_Typography(this.spacing, input?.typography ?? {});
        const zIndex = this.schema.shape.CSS.shape.zIndex.parse(input?.css?.zIndex ?? {});
        this.CSS = {
            border: new Tokens_CSS_Border(input?.css?.border ?? {}),
            transition: new Tokens_CSS_Transition(input?.css?.transition ?? {}),
            zIndex,
        };
    }
    export() {
        return {
            spacing: this.spacing.export(),
            typography: this.typography.export(),
            CSS: {
                border: this.CSS.border.export(),
                transition: this.CSS.transition.export(),
                zIndex: this.CSS.zIndex,
            },
        };
    }
    toScssVars() {
        const exp = this.export();
        const spacing = this.spacing.toScssVars();
        const line_height = exp.typography.lineHeight;
        return {
            spacing_multiplier: spacing.multiplier,
            margin: spacing.margin,
            font: {
                size: exp.typography.size,
            },
            line_height,
            border: exp.CSS.border,
            transition: exp.CSS.transition,
            z_index: exp.CSS.zIndex,
        };
    }
    toJSON() {
        return {
            spacing: this.spacing.toJSON(),
            typography: this.typography.toJSON(),
            CSS: {
                border: this.CSS.border.toJSON(),
                transition: this.CSS.transition.toJSON(),
                zIndex: this.CSS.zIndex,
            },
        };
    }
    toScss() {
        const _vars = this.toScssVars();
        const vars = {
            spacing_multiplier: JsonToScss.convert(_vars.spacing_multiplier) || String(this.schema.shape.spacing.shape.multiplier.parse('')),
            margin: JsonToScss.convert(_vars.margin) || '()',
            font: JsonToScss.convert(_vars.font) || '()',
            line_height: JsonToScss.convert(_vars.line_height) || '()',
            border: JsonToScss.convert(_vars.border) || '()',
            transition: JsonToScss.convert(_vars.transition) || '()',
            z_index: JsonToScss.convert(_vars.z_index) || '()',
        };
        const scss = [
            '// this file is auto-generated by the design-system-utilities Tokens class',
        ];
        const defaultString = this.opts.tokensAsDefault ? ' !default' : '';
        for (const t_key in vars) {
            const _key = t_key;
            scss.push(`$${_key}: ${vars[_key]}${defaultString};`);
        }
        return scss.join('\n\n');
    }
}
/**
 * Utilities for the {@link Tokens} class.
 *
 * @since 0.1.0-alpha.draft
 */
(function (Tokens) {
    ;
})(Tokens || (Tokens = {}));
//# sourceMappingURL=Tokens.js.map