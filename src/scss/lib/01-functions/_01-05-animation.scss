///
/// @package @maddimathon/design-system-utilities@___CURRENT_VERSION___
/// @since ___PKG_VERSION___
///

@use 'pkg:@maddimathon/utility-sass/list';
@use 'pkg:@maddimathon/utility-sass/map';

// @use '../../config';
@use '../../tokens';

// @use 'pkg:@maddimathon/utility-astro/01-functions' as utils;

///
/// Uses the transition time tokens to prepare the appropriate numerical value
/// (in unitless rem).
///
/// @since ___PKG_VERSION___
///
@function transition-time-value($level) {
    $value: map.get(tokens.$transition, time, normal);

    @if not map.has-key(tokens.$transition, time, '#{$level}') {
        @warn "$level '#{$level}' was not a key in tokens.$transition['time']";
    } @else {
        $value: map.get(tokens.$transition, time, '#{$level}');
    }

    @return $value;
}

///
/// Uses the transition time tokens to print the appropriate var(...) with
/// a fallback.
///
/// @since ___PKG_VERSION___
///
@function var-tr-time($level) {
    @return var(--tr-time-#{$level}, #{transition-time-value($level)});
}

$_transition: ();
@each $prop in map.get(tokens.$designSystem, transition, properties, always) {
    $_transition: list.append(
        $_transition,
        '#{$prop} #{var-tr-time(normal)} ease-in-out',
        $separator: comma
    );
}

$_motionTransition: ();
@each $prop in map.get(tokens.$designSystem, transition, properties, motion) {
    $_motionTransition: list.append(
        $_motionTransition,
        '#{$prop} #{var-tr-time(normal)} ease-in-out',
        $separator: comma
    );
}

///
/// Uses the transition properties tokens to prepare a list of transition shorthand values.
///
/// @since ___PKG_VERSION___
///
@function transition-properties-value(
    $withMotion: false,
    $time: var-tr-time(normal)
) {
    // returns
    @if $time == var-tr-time(normal) {
        @return if($withMotion, $_motionTransition, $_transition);
    }

    $transition: ();
    @each $prop
        in map.get(
            tokens.$designSystem,
            transition,
            properties,
            if($withMotion, motion, always)
        )
    {
        $transition: list.append(
            $transition,
            '#{$prop} #{$time} ease-in-out',
            $separator: comma
        );
    }

    @return $transition;
}
