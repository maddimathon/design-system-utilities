///
/// @package @maddimathon/design-system-utilities@___CURRENT_VERSION___
/// @since ___PKG_VERSION___
///
@use 'pkg:@maddimathon/utility-sass/map';

@use '../../config';
@use '../../tokens';

@use '../01-functions' as *;
@use '../02-mixins' as *;

@use 'pkg:@maddimathon/utility-astro/03-snippets' as utils;

///
/// Supports the SettingsMenu astro component.
///
/// @since ___PKG_VERSION___
///
@mixin snippet-support-astro-settings-menu {
    @include utils.snippet-support-astro-settings-menu;

    %aside {
        font-style: normal;
        font-size: #{var-fs(smaller-1)};

        em {
            font-style: italic;

            em {
                font-style: normal;

                em {
                    font-style: italic;
                }
            }
        }
    }

    .website-settings-menu {
    }

    .website-settings__content {
        > .container {
        }

        fieldset {
            > legend {
                color: #{var-theme(text-primary)};

                &,
                &:first-child {
                }
            }

            > .container {
                > label,
                > input {
                }
            }
        }
    }

    .website-settings__disclaimer {
    }

    .website-settings__backdrop {
    }

    /* With Javascript ==================================== */

    #{config.$selector_body} {
        &:has(.website-settings-menu[data-toggle-container='open']) {
        }
    }

    [data-toggle-control] {
        .website-settings-menu &,
        .website-settings-menu[data-toggle-container='open'] & {
            @include hover-focus-visible(
                $addSelectors: (
                    '&:active',
                )
            ) {
                color: #{var-theme(button-primary-text-hover)};
            }
        }
    }

    @include js {
        .website-settings-menu {
            [data-toggle-control] {
                --icon-color: currentColor;

                &.website-settings__backdrop {
                    padding: #{var-mrg-soft('100')} #{var-mrg-soft('100')};

                    &::before,
                    &::after {
                    }

                    &::before {
                    }

                    &::after {
                    }

                    // @include hover-focus-visible-or-within(
                    //     $addSelectors: (
                    //         '&:active',
                    //     )
                    // ) {
                    // }
                }
            }

            [data-toggle-content] {
                > .container {
                }
            }

            &[data-toggle-container] {
            }

            &[data-toggle-container='open'],
            &[data-toggle-container='closing'] {
            }

            &[data-toggle-container='open'] {
                .website-settings__backdrop {
                }

                [data-toggle-content] {
                    > .container {
                    }
                }
            }
        }
    }
}

///
/// Supports font override settings (according to the tokens).
///
/// @since ___PKG_VERSION___
///
@mixin snippet-support-astro-settings-menu-font-overrides {
    @each $map in map.get(tokens.$designSystem, font, familyOverrides) {
        $slug: map.get($map, value);

        $attrSelector: '[data-font-family-override=#{$slug}]';

        $selectors: $attrSelector;

        @if map.has-key($map, labelClass) {
            $selectors: '#{$selectors}, .website-settings-menu .#{map.get($map, labelClass)}';
        }

        #{$selectors} {
            font-family: #{var-font-family(map.get($map, value))} !important;
        }

        @if map.has-key($map, lineHeightScale) {
            //
            $_multi: map.get($map, lineHeightScale);

            #{$attrSelector} {
                @each $slug, $_value in tokens.$line_heights {
                    --line-height-#{$slug}: #{line-height-value($slug) *
                        $_multi};
                }
            }
        }
    }
}
