///
/// @package @maddimathon/design-system-utilities@___CURRENT_VERSION___
/// @since ___PKG_VERSION___
///

@use 'pkg:@maddimathon/utility-sass/math';
@use 'pkg:@maddimathon/utility-sass/meta';

@use '../../tokens';

@use '../01-functions' as *;
@use '../02-mixins' as *;

@use 'pkg:@maddimathon/utility-astro/03-snippets' as utils;

///
/// Adds basic rules for the given heading using tokens in the system.
///
/// @since ___PKG_VERSION___
///
@mixin snippet-heading($slug: '7', $includeUtils: true) {
    //
    @if $slug == title {
        $slug: '1';
    }

    $fontStyle: var-style(heading-#{$slug}-font-style);

    margin-block: #{var-style(heading-#{$slug}-margin-block-start)}
        #{var-style(heading-#{$slug}-margin-block-end)};

    @if font-family-exists(heading) {
        font-family: #{var-font-family(heading)};
    }

    font-weight: #{var-style(heading-#{$slug}-font-weight)};
    font-size: #{var-fs(heading-#{$slug})};
    line-height: #{var-style(heading-#{$slug}-line-height)};
    letter-spacing: #{var-style(heading-#{$slug}-letter-spacing)};

    text-transform: #{var-style(heading-#{$slug}-text-transform)};
    text-wrap: balance;

    font-style: #{$fontStyle};

    @if $fontStyle == italic {
        em,
        i {
            font-style: normal;

            em,
            i {
                font-style: italic;
            }
        }
    }

    color: #{var-theme(heading-#{$slug})};

    // %a {
    //     color: #{var-theme(link)};

    //     @include hover-focus-visible() {
    //         color: #{var-theme(link-hover)};
    //     }

    //     &:active {
    //         color: #{var-theme(link-active)};
    //     }
    // }
}

///
///
///
/// @since ___PKG_VERSION___
///
@mixin snippet-selection($contrast: tokens.$contrastMode_default) {
    //
    --icon-color: #{var-theme(selection-text, $contrast: $contrast)} !important;
    color: #{var-theme(selection-text, $contrast: $contrast)} !important;

    background-color: #{var-theme(selection-bg, $contrast: $contrast)} !important;

    @if $contrast == average {
        //
        background-color: color-mix(
            in srgb,
            #{var-theme(selection-bg, $contrast: $contrast)}
                var(--selection-background-opacity, 75%),
            transparent
        ) !important;
        //
    } @else if $contrast == low {
        //
        background-color: color-mix(
            in srgb,
            #{var-theme(selection-bg, $contrast: $contrast)}
                var(--selection-background-opacity, 65%),
            transparent
        ) !important;
        //
    } @else if $contrast == high {
        //
        background-color: color-mix(
            in srgb,
            #{var-theme(selection-bg, $contrast: $contrast)}
                var(--selection-background-opacity, 90%),
            transparent
        ) !important;
    }
}
