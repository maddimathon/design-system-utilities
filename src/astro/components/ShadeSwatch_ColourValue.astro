---
/**
 * @since 0.1.0-alpha
 *
 * @packageDocumentation
 */

/* import - types */
import type { ElementProps } from '@maddimathon/utility-astro';
import { ColourUtilities } from '../../ts/01-utilities/ColourUtilities.js';

/* import - functions */

/* import - shade */

/* import - components */

/* import - layouts */

/* TYPES ===================================== */

/* PROPS ===================================== */

export interface Props extends ElementProps<{}, 'samp'> {
    /** Whether to set the background as the colour value. */
    background?: boolean;
    shade: Partial<ColourUtilities.SingleShade>;
    version: keyof ColourUtilities.SingleShade;
}

const {
    shade,
    version = 'hex',
    background = false,
    class: classList = [],
    ...attrs
}: Props = Astro.props;

/* CONSTANTS ===================================== */

const bgStyle = background 
? (
    version == 'lch' && shade.lch
    ? ColourUtilities.toString.lch(shade.lch)
    : version == 'hsl' && shade.hsl
    ? ColourUtilities.toString.hsl(shade.hsl)
    : version == 'rgb' && shade.rgb
    ? ColourUtilities.toString.rgb(shade.rgb)
    : shade.hex
    ? ColourUtilities.toString.hex(shade.hex)
    : undefined
)
: undefined;
---

{Object.keys( shade ).length && (
    <samp
        {...attrs}
        class:list={[
            'shade-swatch__colour-value',
            `shade-swatch__colour-value--${version}`,
            '||',
            classList,
        ]}
        style={bgStyle && `background: ${bgStyle} !important;`}
    >
        {
            version == 'hsl' && shade.hsl ? (
                <Fragment>
                    <!-- prettier-ignore -->
                    hsl(<strong set:text={shade.hsl.h} />,{' '}<strong set:text={`${shade.hsl.s}%`} />,{' '}<strong set:text={`${shade.hsl.l}%`} />)
                </Fragment>
            ) : version == 'lch' && shade.lch ? (
                <Fragment>
                    <!-- prettier-ignore -->
                    lch(<strong set:text={shade.lch.l} />{' '}<strong set:text={`${shade.lch.c}`} />{' '}<strong set:text={`${shade.lch.h}`} />)
                </Fragment>
            ) : version == 'rgb' && shade.rgb ? (
                <Fragment>
                    <!-- prettier-ignore -->
                    rgb(<strong set:text={shade.rgb.r} />,{' '}<strong set:text={`${shade.rgb.g}`} />,{' '}<strong set:text={`${shade.rgb.b}`} />)
                </Fragment>
            ) : shade.hex && <Fragment>#<strong set:text={shade.hex} /></Fragment>
        }
    </samp>
) }