---
/**
 * @since ___PKG_VERSION___
 *
 * @packageDocumentation
 */

/* import - types */
import type { Tokens } from '../../ts/02-tokens/Tokens.js';

/* import - functions */
import { arrayUnique } from '@maddimathon/utility-typescript/functions';

/* import - values */

/* import - components */
import Toggle from '@maddimathon/utility-astro/components/Toggle';
// import VariableDump from '@maddimathon/utility-astro/components/VariableDump';

/* import - layouts */

/* TYPES ===================================== */

/* PROPS ===================================== */

export interface Props {
    tokens: Tokens.JsonReturn;
}

const { tokens }: Props = Astro.props;

/* CONSTANTS ===================================== */

const defaultToggleToOpen = import.meta.env.DEV ? true : undefined;

const allFontLevels = arrayUnique(
    Object.values(tokens.typography.fonts)
        .map(({ weights }) =>
            Object.values(weights)
                .map((obj) => Object.values(obj).map( o => o.weight ))
                .flat()
        )
        .flat()
).sort();
---

<Toggle
    defaultOpen={defaultToggleToOpen}
    heading={2}
    id='sizes'
>
    <Fragment slot='button'>Font Weights</Fragment>
    <div 
        class='font-family-swatch-list'
        style={`--font-family-list-column-count: ${Object.keys( tokens.typography.fonts ).length}`}
    >
        {
            Object.values(tokens.typography.fonts).map((font) => (
                <article 
                    class='font-family-swatch'
                    style={`font-family: var(--ff-${font.slug}, "${font.name}")`}
                >
                    <h3
                        class:list={['font-family-swatch__name']}
                        set:text={font.name}
                    />
                    <dl class='font-family-swatch__details-list' >{ ( Object.keys( font ) as (keyof typeof font)[] ).map( ( key ) => key !== 'weights' && (
                        <dd
                            class:list={[ 'font-family-swatch__details-dt' ]}
                            set:text={key}
                        />
                        <dd
                            class:list={[ 'font-family-swatch__details-dd' ]}
                            set:text={font[key]}
                        />
                    ) ) }</dl>
                    {allFontLevels.map(( weight ) => font.weights[weight] && ( [ 'normal', 'italic' ] as const ).map( style => (
                        <dd
                            class:list={[
                                'font-family-swatch__weight-dt',
                                `font-family-swatch__weight-dt--${ style == 'italic' ? `${weight}-${style}` : weight }`, 
                            ]}
                            style={ [
                                `font-style: ${style}`,
                                `font-weight: ${weight}`,
                            ].join(';') }
                            set:text={ style === 'italic' ? `${weight} (${style})`: weight }
                        />
                        <dd
                            class:list={[
                                'font-family-swatch__weight-dd',
                                `font-family-swatch__weight-dd--${ style == 'italic' ? `${weight}-${style}` : weight }`,
                            ]}
                            style={ [
                                `font-style: ${style}`,
                                `font-weight: ${weight}`,
                            ].join(';') }
                            set:text={`Maecenas facilisis sollicitudin nisi, eget pellentesque dui rhoncus condimentum. Vivamus vulputate nisl sit amet vehicula commodo. Suspendisse pharetra varius ipsum, sed scelerisque ipsum tempor eget. Curabitur mollis lacus eu augue vestibulum semper. Praesent rutrum velit sodales ante varius convallis. Proin ut gravida sem. Nulla ac sapien odio. Cras neque arcu, fermentum non elementum ac, tincidunt ut nibh. Proin blandit, nisl at volutpat pulvinar, massa nisl vulputate risus, eget porttitor neque mi id augue. Integer porttitor egestas facilisis. Quisque eget nibh hendrerit, ornare nisl sit amet, faucibus enim.`}
                        />
                    ) ))}
                </article>
            ))
        }
    </div>
</Toggle>

<style lang='scss'>
    @forward '../scss/page-content-font-families';
</style>
