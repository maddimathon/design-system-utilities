/**
 * @since ___PKG_VERSION___
 * 
 * @packageDocumentation
 */
/*!
 * @maddimathon/design-system-utilities@___CURRENT_VERSION___
 * @license MIT
 */

import type { Test } from '@maddimathon/utility-typescript/types';
import { describe, expect, test } from '@jest/globals';

import { objectMap } from './objectMap.js';


//#region - Test 1
const test1_og = {
    'one': '1',
    'two': '2',
    'three': '3',
} as const;

const test1_generator = ( [ key, value ]: [
    keyof typeof test1_og,
    typeof test1_og[ keyof typeof test1_og ],
] ) => false;

const test1_expected = {
    'one': false,
    'two': false,
    'three': false,
};

const test1_result = objectMap( test1_og, test1_generator );
//#endregion - Test 1


//#region - Test 2
const test2_og = {
    'one': '1',
    'two': '2',
    'three': '3',
} as const;

const test2_generator = ( [ key, value ]: [
    keyof typeof test2_og,
    typeof test2_og[ keyof typeof test2_og ],
] ) => {

    // returns
    if ( key == 'one' ) {
        return `${ value }--${ key }`;
    }

    return Number( value );
};

const test2_expected = {
    'one': '1--one',
    'two': 2,
    'three': 3,
};

const test2_result = objectMap( test2_og, test2_generator );
//#endregion - Test 2


export type Tests = [
    Test.Expect<Test.Exactly<typeof test1_expected, typeof test1_result>>,
    Test.Expect<Test.Exactly<{
        'one': number | string,
        'two': number | string,
        'three': number | string,
    }, typeof test2_result>>,
];

describe( 'objectMap', () => {

    test( 'test 1 - simple obj', () => {
        expect( test1_result ).toEqual( test1_expected );
    } );

    test( 'test 2 - conditional obj', () => {
        expect( test2_result ).toEqual( test2_expected );
    } );
} );